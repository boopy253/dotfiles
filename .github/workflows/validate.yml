name: Validate Dotfiles

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  validate:
    runs-on: macos-latest
    steps:
      - uses: actions/checkout@v6

      - name: Validate shell scripts
        run: |
          zsh -n install.sh
          zsh -n uninstall.sh

      - name: Validate git config
        run: git config -f .gitconfig --list > /dev/null

      - name: Validate JSON files
        run: |
          for file in $(find .config -name "*.json" 2>/dev/null); do
            jq . "$file" > /dev/null
          done
